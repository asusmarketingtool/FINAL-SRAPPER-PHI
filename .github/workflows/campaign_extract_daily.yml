- name: Install Python deps
  if: steps.timegate.outputs.run_now == 'true'
  run: |
    python -m pip install --upgrade pip
    pip install -r requirements.txt

- name: Install Playwright (Chromium)
  if: steps.timegate.outputs.run_now == 'true'
  run: |
    python -m playwright install --with-deps chromium

- name: Run extractor
  if: steps.timegate.outputs.run_now == 'true'
  env:
    GCP_SA_JSON: ${{ secrets.GCP_SA_JSON }}
  run: |
    python campaign_extract_to_sheets.py
